### Основные представления

 #### Функциональное

  Основные функции системы, которые реализуются в рамках разных модулей представлены на схеме ниже:

  ![Функциональное представление](../static/functional_view.jpeg)

 Главным интерфейсом доступа к функциям системы является приложение. Оно обеспечивает следующие функции:

 - Запись и загрузку тренировок
 - Просмотр статистики тренировок
 - Интерфейс социальной сети
 - Просмотр и редактирование профиля пользователя
 - Интерфейс доступа к магазину и управлению покупками

 **API Gateway обеспечивает следующие функции**

 - Аутентификация
 - Авторизация
 - Управление распределением и маршрутизацией запросов

 **Модуль тренировок обеспечивает следующие функции**

 - Запись и хранение пользовательских тренировок
 - Обработка пользовательских тренировок (разные статистические срезы, сравнение с другими пользователя и т.д.)
 - Генерация уведомлений со со стороны своего модуля

 **Модуль маркетинга обеспечивает следующие функции:**

 - Получение из других модулей, нормализация и хранение данных для машинного обучения 
 - Анализ пользовательских данных (выявление трендов, предпочтений и т.д.)
 - Генерация персональный таргетированных предложений

 **Социальный модуль обеспечивает следующие функции**

 - Предоставляет API для фронтэнда и приложения
 - Хранит данные пользователя, данные для работы социальной сети, а также планы тренировок
 - Генерирует персональную ленту пользователя
 - Генерирует предложения по тренировкам (предлагает пользователей для совместных тренировок, участие в разных спортивных мероприятиях и т.д.)

 **Утилита уведомлений**

 - Предоставляет функционал почтовым рассылок другим модулям


 #### Информационное представление

 Все информационные потоки в системе построены на REST архитектуре распределенного взаимодействия. Поэтому, все информационные потоки: будь-то от пользователя к сервису, или от сервиса к сервису строятся на одном и тоже шаблоне, который представлен ниже:

 ![Схема информационного представления](../static/informational_view.jpeg)

 Клиент, в роли которого может выступать как пользователь, так и сервис, посылает CRUD (Create/Read/Update/Delete) запрос на сервер. Сервер либо сразу отдает данные, если обладает ими, или посылает уточняющий запрос к другому модулю по той же схеме. После генерации необходимого ответа - отсылает его клиенту.


 #### Многозадачность

 Многозадачность будет обеспечена следующими подходами:

 - Для операций, которые могут затрагивать обработку или передачу больших объемов данных будут созданы очереди сообщений. Сообщения будут складываться в очереди и обрабатываться по мере возможности, что минимизирует риск потери данных и возникновения коллизий
 - При необходимости будут автоматически подниматься новые экземпляры модулей, для ускорения обработки пользовательских запросов
 - Само наше приложение не участвует в таких важных операциях как цепочка покупки товара (с резервированием на складе и списанием денег). Весь этот функционал нам предоставляет магазин через свой API. В связи с этим у нас нет необходимости в хранении сложный пользовательских состояний.


 #### Инфраструктурное

 В виду сложности реализации и поддержки, а также в связи с введенными санкциями - построение свей собственной инфрастуктуры под проект не является целесообразной.
 Предполагается найти облачного поставщика PaaS решения [ADR: PaaS](../ADR/paas.md) и отдать ему всю ответственность по обслуживанию и управлению инфраструктурными решениями, такими как:
 - обслуживание БД
 - резервное копирование
 - балансировка нагрузки
 - обнаружение сервисов
 - управление экземплярами приложений
 - обслуживание и обновление операционных систем
 - базовая конфигурация безопасности инфрастуктуры


 Инфраструктуру можно организоваться на базе оркестрируемой контейнеризации. Модули приложения упаковывать в контейнеры и поды. Это позволит быстро разворачивать новые экземпляры требуемых модулей при необходимости.


 #### Безопасность

 Обеспечение безопасности будет основываться на следующих моментах:

 - В виду концепции взаимодействия между сервисами через REST API, которое реализуется через HTTP протокол - необходимо зашифровать весь передаваемый траффик - т.е. реализоваться все взаимодействие между API сервисов по протоколу HTTPS.
 - Все общение между сервисами и компонентами внутри сервисов происходит с использованием JWT-токенов.
 - Все чувствительные данные хранятся только зашифрованном виде.
 - Доступ к внутренним API сервисов из сети интернет будет запрещен.
 - Политики в области паролей
 - Четкая ролевая модель доступа к ресурсам
 - Настройка сетевого мониторинга для выявление попыток атак или попыток доступа к закрытым ресурсам
 - Невозможность доступа к какому-либо ресурсу, кроме лендинг-страниц и страниц регистрации без JWT-токена
 - Доступ к базам данных только с адресов и ролей сервиса, который эту БД использует

 ![Безопасность](../static/security_view.jpeg)